{"version":3,"sources":["00_global.js","01_fetch.js","02_favourites.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst submitBtn = document.querySelector('.js-submit');\nconst resetBtn = document.querySelector('.js-reset');\nconst favList = document.querySelector('.js-favourites');\nconst resultList = document.querySelector('.js-results');\n\nlet resultElements = [];\nlet favElements = [];\n\n","function getAnime(event) {\n    event.preventDefault()\n    const animeInput = document.querySelector('.js-input').value;\n    fetch(`https://api.jikan.moe/v3/search/anime?q=${animeInput}`)\n        .then(response => response.json())\n        .then(animeData => {\n            resultElements = animeData.results;\n            renderResultList(resultElements);\n        });\n\n}\n\nfunction renderResultList(resultElements) {\n    resultList.innerHTML = `<h2 class=\"results__title\">Resultados:</h2>`;\n    for (let i = 0; i < resultElements.length; i++) {\n        if (resultElements[i].image_url === 'https://cdn.myanimelist.net/images/qm_50.gif?s=e1ff92a46db617cb83bfc1e205aff620') {\n            resultList.innerHTML +=\n                ` \n                <article class=\"results__card js-card\">\n                <img\n                    src=\"https://via.placeholder.com/210x295/000000/ffffff/?text=${resultElements[i].title}\"\n                    class=\"results__card--img\"\n                    alt=\"${resultElements[i].title}\"\n                />\n                <h3 class=\"results__card--title js-cardTitle\">${resultElements[i].title}</h3>\n                </article>\n                `\n                ;\n\n        } else {\n            resultList.innerHTML +=\n                ` \n                <article class=\"results__card js-card\">\n                <img\n                    src=\"${resultElements[i].image_url}\"\n                    class=\"results__card--img\"\n                    alt=\"${resultElements[i].title}\"\n                />\n                <h3 class=\"results__card--title js-cardTitle\">${resultElements[i].title}</h3>\n                </article>\n                `\n                ;\n        }\n        const animeCard = document.querySelectorAll('.js-card');\n        for (const eachCard of animeCard) {\n            eachCard.addEventListener('click', addFavourite);\n        }\n        compareLists();\n\n    }\n}\nsubmitBtn.addEventListener('click', getAnime); ","\nfunction addFavourite(event) {\n    const animeInfo = event.currentTarget.querySelector('.results__card--img');\n    if (event.currentTarget.classList.contains('favourite')) {\n        let index = favElements.findIndex(i => i.title === animeInfo.alt);\n        favElements.splice(index, 1);\n        event.currentTarget.classList.remove('favourite');\n    } else {\n\n        const newFavourite = {\n            title: animeInfo.alt,\n            image_url: animeInfo.src,\n        }\n        favElements.push(newFavourite);\n        event.currentTarget.classList.add('favourite');\n    }\n    renderFavList(favElements);\n}\n\nfunction renderFavList(favElements) {\n    favList.innerHTML = `<h2 class=\"favourites__title\">Favoritos:</h2>`;\n    for (let i = 0; i < favElements.length; i++) {\n        if (favElements[i].image_url === 'https://cdn.myanimelist.net/images/qm_50.gif?s=e1ff92a46db617cb83bfc1e205aff620') {\n            favList.innerHTML +=\n                ` \n                <article class=\"favourites__card js-fav favourite\">\n                <i class=\"fas fa-times favourites__card--icon js-remove\"></i>\n                <img\n                    src=\"https://via.placeholder.com/210x295/000000/ffffff/?text=${favElements[i].title}\"\n                    class=\"favourites__card--img\"\n                    alt=\"${favElements[i].title}\"\n                />\n                <h3 class=\"favourites__card--title\">${favElements[i].title}</h3>\n                </article>\n                `\n                ;\n\n        } else {\n            favList.innerHTML +=\n                ` \n                <article class=\"favourites__card js-fav favourite\">\n                <i class=\"fas fa-times favourites__card--icon js-remove\"></i>\n                <img\n                    src=\"${favElements[i].image_url}\"\n                    class=\"favourites__card--img\"\n                    alt=\"${favElements[i].title}\"\n                />\n                <h3 class=\"favourites__card--title\">${favElements[i].title}</h3>\n                </article>\n                `\n                ;\n        }\n        const removeBtn = document.querySelectorAll('.js-remove');\n        for (const eachBtn of removeBtn) {\n            eachBtn.addEventListener('click', removeFavourite);\n        }\n\n    }\n    localStorage.setItem(\"favs\", JSON.stringify(favElements));\n}\n\nfunction removeFavourite(event) {\n    const favCard = event.currentTarget.parentElement;\n    const favInfo = favCard.querySelector('.favourites__card--img').alt;\n    let index = favElements.findIndex(i => i.title === favInfo);\n    favElements.splice(index, 1);\n    event.currentTarget.classList.remove('favourite');\n    renderFavList(favElements);\n    compareLists();\n}\n\nfunction compareLists() {\n    const resultTitles = document.querySelectorAll('.js-cardTitle');\n    for (const eachTitle of resultTitles) {\n        if (favElements.some(i => i.title === eachTitle.innerHTML)) {\n            eachTitle.parentElement.classList.add('favourite');\n        } else {\n            eachTitle.parentElement.classList.remove('favourite');\n        }\n    }\n\n}\n\nfunction resetFavs(event) {\n    event.preventDefault()\n    favElements = [];\n    renderFavList(favElements);\n    compareLists();\n}\n\nresetBtn.addEventListener('click', resetFavs);\n\nfavElements = JSON.parse(localStorage.getItem(\"favs\"));\nwindow.onload = renderFavList(favElements);\n"]}
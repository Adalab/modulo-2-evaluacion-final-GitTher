{"version":3,"sources":["00_global.js","01_fetch.js","02_favourites.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst animeInput = document.querySelector('.js-input');\nconst submitBtn = document.querySelector('.js-submit');\nconst resetBtn = document.querySelector('.js-reset');\nconst favList = document.querySelector('.js-favourites');\nconst resultList = document.querySelector('.js-results');\n\nlet resultElements = [];\nlet favElements = [];\n\n","function checkInput() {\n    if (animeInput.value.length == 0) {\n        animeInput.classList.add('empty');\n    } else {\n        animeInput.classList.remove('empty');\n        return (true);\n    }\n}\n\nfunction getAnime(event) {\n    event.preventDefault()\n    checkInput();\n    if (checkInput() === true) {\n        fetch(`https://api.jikan.moe/v3/search/anime?q=${animeInput.value}`)\n            .then(response => response.json())\n            .then(animeData => {\n                resultElements = animeData.results;\n                renderResultList(resultElements);\n            });\n    }\n\n}\n\nfunction renderResultList(resultElements) {\n    resultList.innerHTML = '';\n    for (let i = 0; i < resultElements.length; i++) {\n        const resultCard = document.createElement('li');\n        const resultCardImg = document.createElement('img');\n        const resultCardTitle = document.createElement('h3');\n        const resultCardTitleContent = document.createTextNode(resultElements[i].title);\n\n        resultCard.appendChild(resultCardImg);\n        resultCard.appendChild(resultCardTitle);\n        resultCard.classList.add('results__card', 'js-card');\n\n        resultCardImg.alt = resultElements[i].title;\n        resultCardImg.classList.add('results__card--img');\n\n        resultCardTitle.appendChild(resultCardTitleContent);\n        resultCardTitle.classList.add('results__card--title', 'js-cardTitle');\n\n        resultList.appendChild(resultCard);\n\n        if (resultElements[i].image_url === 'https://cdn.myanimelist.net/images/qm_50.gif?s=e1ff92a46db617cb83bfc1e205aff620') {\n            resultCardImg.src = `https://via.placeholder.com/210x295/bbe1fa/0f4c75/?text=${resultElements[i].title}`;\n        } else if (resultElements[i].image_url === '') {\n            resultCardImg.src = `https://via.placeholder.com/210x295/bbe1fa/0f4c75/?text=${resultElements[i].title}`;\n        } else {\n            resultCardImg.src = resultElements[i].image_url;\n        }\n\n        if (resultElements[i].airing == true) {\n            const moreInfo = document.createElement('a');\n            const moreInfoText = document.createTextNode('Mas información');\n            moreInfo.appendChild(moreInfoText);\n            moreInfo.href = resultElements[i].url;\n            resultCardTitle.appendChild(moreInfo);\n        } else {\n            const notAiring = document.createElement('p');\n            const notAiringText = document.createTextNode('No se está emitiendo');\n            notAiring.appendChild(notAiringText);\n            resultCardTitle.appendChild(notAiring);\n        }\n\n        const animeCard = document.querySelectorAll('.js-card');\n        for (const eachCard of animeCard) {\n            eachCard.addEventListener('click', addFavourite);\n        }\n\n        compareLists();\n\n    }\n}\nsubmitBtn.addEventListener('click', getAnime);\nanimeInput.addEventListener('keyup', checkInput);","\nfunction addFavourite(event) {\n    const animeInfo = event.currentTarget.querySelector('.results__card--img');\n    if (event.currentTarget.classList.contains('favourite')) {\n        let index = favElements.findIndex(i => i.title === animeInfo.alt);\n        favElements.splice(index, 1);\n        event.currentTarget.classList.remove('favourite');\n    } else {\n        const newFavourite = {\n            title: animeInfo.alt,\n            image_url: animeInfo.src,\n        }\n        favElements.push(newFavourite);\n        event.currentTarget.classList.add('favourite');\n    }\n    renderFavList(favElements);\n}\n\nfunction renderFavList(favElements) {\n    favList.innerHTML = '';\n    for (let i = 0; i < favElements.length; i++) {\n        const favCard = document.createElement('li');\n        const favCardIcon = document.createElement('i');\n        const favCardImg = document.createElement('img');\n        const favCardTitle = document.createElement('h3');\n        const favCardTitleContent = document.createTextNode(favElements[i].title);\n\n        favCard.appendChild(favCardIcon);\n        favCard.appendChild(favCardImg);\n        favCard.appendChild(favCardTitle);\n        favCard.classList.add('favourites__card', 'js-fav');\n\n        favCardIcon.classList.add('fas', 'fa-times', 'favourites__card--icon', 'js-remove');\n\n        favCardImg.alt = favElements[i].title;\n        favCardImg.classList.add('favourites__card--img');\n\n        favCardTitle.appendChild(favCardTitleContent);\n        favCardTitle.classList.add('favourites__card--title');\n\n        favList.appendChild(favCard);\n\n        if (favElements[i].image_url === 'https://cdn.myanimelist.net/images/qm_50.gif?s=e1ff92a46db617cb83bfc1e205aff620') {\n            favCardImg.src = `https://via.placeholder.com/210x295/bbe1fa/0f4c75/?text=${favElements[i].title}`;\n        } else if (favElements[i].image_url === '') {\n            favCardImg.src = `https://via.placeholder.com/210x295/bbe1fa/0f4c75/?text=${favElements[i].title}`;\n        } else {\n            favCardImg.src = favElements[i].image_url;\n        }\n        favCard.addEventListener('click', renderTitleConsole);\n        function renderTitleConsole() {\n            console.log(favElements[i].title);\n        }\n    }\n\n    const removeBtn = document.querySelectorAll('.js-remove');\n    for (const eachBtn of removeBtn) {\n        eachBtn.addEventListener('click', removeFavourite);\n    }\n    localStorage.setItem(\"favs\", JSON.stringify(favElements));\n}\n\nfunction removeFavourite(event) {\n    const favCard = event.currentTarget.parentElement;\n    const favInfo = favCard.querySelector('.favourites__card--img').alt;\n    let index = favElements.findIndex(i => i.title === favInfo);\n    favElements.splice(index, 1);\n    event.currentTarget.classList.remove('favourite');\n    renderFavList(favElements);\n    compareLists();\n}\n\nfunction compareLists() {\n    const resultTitles = document.querySelectorAll('.js-cardTitle');\n    for (const eachTitle of resultTitles) {\n        if (favElements.some(i => i.title === eachTitle.innerHTML)) {\n            eachTitle.parentElement.classList.add('favourite');\n        } else {\n            eachTitle.parentElement.classList.remove('favourite');\n        }\n    }\n}\n\nfunction resetFavs(event) {\n    event.preventDefault()\n    favElements = [];\n    renderFavList(favElements);\n    compareLists();\n}\n\nresetBtn.addEventListener('click', resetFavs);\nif (localStorage.getItem(\"favs\") !== null) {\n    favElements = JSON.parse(localStorage.getItem(\"favs\"));\n}\n\nwindow.onload = renderFavList(favElements);\n"]}